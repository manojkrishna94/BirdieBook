@model BirdieBook.ViewModels.UserRoundCreateViewModel
@{
    ViewData["Title"] = "Create";
}

<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/corejs-typeahead/1.1.1/typeahead.jquery.min.js"></script>

<h2>Create</h2>

<h4>UserRound</h4>
<hr />
<div class="row">
    <div class="col-md-4">
        <form asp-action="Create">

            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div class="form-group">
                <label asp-for="@Model.UserRound.UserID" class="control-label"></label>
                <input asp-for="@Model.UserRound.UserID" class="form-control" />
                <span asp-validation-for="@Model.UserRound.UserID" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label asp-for="@Model.GolfCourses.First().Name"></label>
                <select asp-for="@Model.GolfCourses" id="GolfCourseSelect"
                        asp-items="@(new SelectList(Model.GolfCourses, "GolfCourseID", "Name"))"
           >
                </select>
            </div>
            
            <div class="form-group">
                <label asp-for="@Model.TeeBoxes.FirstOrDefault().Name"></label>
                <select asp-for="@Model.UserRound.TeeBoxID" id="TeeBoxSelect"> @* Options are populated from Jquery events below *@

                        @*asp-items="@(new SelectList(Model.TeeBoxes, "TeeBoxID", "Name"))">*@
                </select>
                <span asp-validation-for="@Model.UserRound.TeeBoxID" class="text-danger"></span>

            </div>

            <div class="form-group">
                <label asp-for="@Model.UserRound.TeeTime" class="control-label"></label>
                <input asp-for="@Model.UserRound.TeeTime" class="form-control" />
                <span asp-validation-for="@Model.UserRound.TeeTime" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="@Model.UserRound.UserHCP" class="control-label"></label>
                <input asp-for="@Model.UserRound.UserHCP" class="form-control" />
                <span asp-validation-for="@Model.UserRound.UserHCP" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="@Model.UserRound.DailyScratchRating" class="control-label"></label>
                <input asp-for="@Model.UserRound.DailyScratchRating" class="form-control" />
                <span asp-validation-for="@Model.UserRound.DailyScratchRating" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="@Model.UserRound.WeatherCondition" class="control-label"></label>
                <input asp-for="@Model.UserRound.WeatherCondition" class="form-control" />
                <span asp-validation-for="@Model.UserRound.WeatherCondition" class="text-danger"></span>
            </div>



            <div class="form-group">
                <input type="submit" value="Create" class="btn btn-default" />
            </div>
        </form>
    </div>
</div>
 
<div>
    <a asp-action="Index">Back to List</a>
</div>

<div id="the-basics">
    <input class="typeahead" type="text" placeholder="States of USA">
</div>

@*User Scores per hole*@
@await Component.InvokeAsync("UserScore", new { userRoundCreate= Model })
 

    <script>
        $(document).ready(function() {
            console.log('document ready');

            //Override some styles to show proper dropdown boxes.
            $('#GolfCourseSelect').removeAttr('multiple');
            $('#TeeBoxSelect').removeAttr('multiple');


            //Get Teeboxes after a golfcourse was selected
            $('#GolfCourseSelect').click(function () {
                console.log('GolfCourseSelect clicked: ' + $('#GolfCourseSelect').val());
                $.getJSON("/TeeBoxes/GetTeeboxes/" + $('#GolfCourseSelect').val(), function (data) {
                    $.each(data, function (key, teeBox) {
                        $('#TeeBoxSelect').append($('<option></option>').val(teeBox.teeBoxID).text(teeBox.name));
                        //console.log(key + ' ' + teeBox.teeBox.name);
                    });
                });
            });

        //var substringMatcher = function (strs) {
        //    return function findMatches(q, cb) {
        //        var matches, substringRegex;

        //        // an array that will be populated with substring matches
        //        matches = [];

        //        // regex used to determine if a string contains the substring `q`
        //        substrRegex = new RegExp(q, 'i');

        //        // iterate through the pool of strings and for any string that
        //        // contains the substring `q`, add it to the `matches` array
        //        $.each(strs, function (i, str) {
        //            if (substrRegex.test(str)) {
        //                matches.push(str);
        //            }
        //        });

        //        cb(matches);
        //    };
        //};

        //var states = ['Alabama', 'Alaska', 'Arizona', 'Arkansas', 'California',
        //    'Colorado', 'Connecticut', 'Delaware', 'Florida', 'Georgia', 'Hawaii',
        //    'Idaho', 'Illinois', 'Indiana', 'Iowa', 'Kansas', 'Kentucky', 'Louisiana',
        //    'Maine', 'Maryland', 'Massachusetts', 'Michigan', 'Minnesota',
        //    'Mississippi', 'Missouri', 'Montana', 'Nebraska', 'Nevada', 'New Hampshire',
        //    'New Jersey', 'New Mexico', 'New York', 'North Carolina', 'North Dakota',
        //    'Ohio', 'Oklahoma', 'Oregon', 'Pennsylvania', 'Rhode Island',
        //    'South Carolina', 'South Dakota', 'Tennessee', 'Texas', 'Utah', 'Vermont',
        //    'Virginia', 'Washington', 'West Virginia', 'Wisconsin', 'Wyoming'
        //];

        //$('#the-basics .typeahead').typeahead({
        //    hint: true,
        //    highlight: true,
        //    minLength: 1
        //},
        //    {
        //        name: 'states',
        //        source: substringMatcher(states)
        //    });
    });

    </script>



    @section Scripts {
        @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    }

<style>
    /* scaffolding */
    /* ----------- */

    html {
        overflow-y: scroll;
        *overflow-x: hidden;
    }

    .container {
        max-width: 750px;
        margin: 0 auto;
        text-align: center;
    }

    .tt-menu,
    .gist {
        text-align: left;
    }

    /* base styles */
    /* ----------- */

    html {
        font: normal normal normal 18px/1.2 "Helvetica Neue", Roboto, "Segoe UI", Calibri, sans-serif;
        color: #292f33;
    }


    a {
        color: #03739c;
        text-decoration: none;
    }

        a:hover {
            text-decoration: underline;
        }

    .table-of-contents li {
        display: inline-block;
        *display: inline;
        zoom: 1;
    }

        .table-of-contents li a {
            font-size: 16px;
            color: #999;
        }

    p + p {
        margin: 30px 0 0 0;
    }

    /* site theme */
    /* ---------- */

    .title {
        margin: 20px 0 0 0;
        font-size: 64px;
    }

    .example {
        padding: 30px 0;
    }

    .example-name {
        margin: 20px 0;
        font-size: 32px;
    }

    .demo {
        position: relative;
        *z-index: 1;
        margin: 50px 0;
    }

    .typeahead,
    .tt-query,
    .tt-hint {
        width: 396px;
        height: 30px;
        padding: 8px 12px;
        font-size: 24px;
        line-height: 30px;
        border: 2px solid #ccc;
        -webkit-border-radius: 8px;
        -moz-border-radius: 8px;
        border-radius: 8px;
        outline: none;
    }

    .typeahead {
        background-color: #fff;
    }

        .typeahead:focus {
            border: 2px solid #0097cf;
        }

    .tt-query {
        -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
        -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
        box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
    }

    .tt-hint {
        color: #999
    }

    .tt-menu {
        width: 422px;
        margin: 12px 0;
        padding: 8px 0;
        background-color: #fff;
        border: 1px solid #ccc;
        border: 1px solid rgba(0, 0, 0, 0.2);
        -webkit-border-radius: 8px;
        -moz-border-radius: 8px;
        border-radius: 8px;
        -webkit-box-shadow: 0 5px 10px rgba(0,0,0,.2);
        -moz-box-shadow: 0 5px 10px rgba(0,0,0,.2);
        box-shadow: 0 5px 10px rgba(0,0,0,.2);
    }

    .tt-suggestion {
        padding: 3px 20px;
        font-size: 18px;
        line-height: 24px;
    }

        .tt-suggestion:hover {
            cursor: pointer;
            color: #fff;
            background-color: #0097cf;
        }

        .tt-suggestion.tt-cursor {
            color: #fff;
            background-color: #0097cf;
        }

        .tt-suggestion p {
            margin: 0;
        }

    .gist {
        font-size: 14px;
    }

    /* example specific styles */
    /* ----------------------- */

    #custom-templates .empty-message {
        padding: 5px 10px;
        text-align: center;
    }

    #multiple-datasets .league-name {
        margin: 0 20px 5px 20px;
        padding: 3px 0;
        border-bottom: 1px solid #ccc;
    }

    #scrollable-dropdown-menu .tt-menu {
        max-height: 150px;
        overflow-y: auto;
    }

    #rtl-support .tt-menu {
        text-align: right;
    }
</style>